(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9109],{8113:function(e,a,s){Promise.resolve().then(s.bind(s,48275))},48275:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return w}});var t=s(57437),i=s(2265),l=s(46281),n=s(99178),r=s(84226),c=s(38068),d=s(95998),o=s(69379),m=s(2141),x=s(69064),h=s(99397),u=s(29525),j=s(92369),p=s(83774),g=s(31047),v=s(42208),y=s(94630),f=s(18930),b=s(89345),N=s(77127),_=s(89048);function w(){let{company:e}=(0,l.a)(),[a,s]=(0,i.useState)([]),[w,C]=(0,i.useState)(!0),[S,Z]=(0,i.useState)(!1),[E,T]=(0,i.useState)(null),[z,k]=(0,i.useState)([]),[P,M]=(0,i.useState)([]),[D,q]=(0,i.useState)([]),[F,H]=(0,i.useState)(!1),[I,O]=(0,i.useState)(null),[L,A]=(0,i.useState)(!1),[R,B]=(0,i.useState)(null),[U,W]=(0,i.useState)({search:"",status:"",job_type:"",priority:"",client_id:"",technician_id:""}),[G,Y]=(0,i.useState)([]),[J,V]=(0,i.useState)({title:"",description:"",job_type:"repair",priority:"normal",category:"",client_id:"",technician_id:"",insurance_company_id:"",scheduled_date:"",estimated_hours:0,notes:""});(0,i.useEffect)(()=>{e&&(K(),ee(),ea(),es())},[e]);let K=async()=>{try{C(!0);let{data:a,error:t}=await m.supabase.from("jobs").select("\n          *,\n          clients!inner(first_name, last_name, email, phone, address),\n          technicians(first_name, last_name, phone),\n          insurance_companies(name)\n        ").eq("company_id",e.id).order("created_at",{ascending:!1});if(t)throw t;s(a||[])}catch(e){console.error("Error loading jobs:",e),x.ZP.error("Error al cargar los trabajos")}finally{C(!1)}},Q=()=>{let e=a;if(U.search){let a=U.search.toLowerCase();e=e.filter(e=>{var s,t,i,l,n;return e.title.toLowerCase().includes(a)||e.job_number.toLowerCase().includes(a)||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(a))||(null===(i=e.clients)||void 0===i?void 0:null===(t=i.first_name)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(n=e.clients)||void 0===n?void 0:null===(l=n.last_name)||void 0===l?void 0:l.toLowerCase().includes(a))})}U.status&&(e=e.filter(e=>e.status===U.status)),U.job_type&&(e=e.filter(e=>e.job_type===U.job_type)),U.priority&&(e=e.filter(e=>e.priority===U.priority)),U.client_id&&(e=e.filter(e=>e.client_id===U.client_id)),U.technician_id&&(e=e.filter(e=>e.technician_id===U.technician_id)),Y(e)};(0,i.useEffect)(()=>{Q()},[a,U]);let X=(e,a)=>{W(s=>({...s,[e]:a}))},$=()=>{W({search:"",status:"",job_type:"",priority:"",client_id:"",technician_id:""})},ee=async()=>{try{let{data:a,error:s}=await m.supabase.from("clients").select("id, first_name, last_name, email, phone").eq("company_id",e.id).order("first_name");if(s)throw s;k(a||[])}catch(e){console.error("Error loading clients:",e)}},ea=async()=>{try{let{data:a,error:s}=await m.supabase.from("technicians").select("id, first_name, last_name, phone, specialties").eq("company_id",e.id).eq("is_active",!0).order("first_name");if(s)throw s;M(a||[])}catch(e){console.error("Error loading technicians:",e)}},es=async()=>{try{let{data:a,error:s}=await m.supabase.from("insurance_companies").select("id, name").eq("company_id",e.id).eq("is_active",!0).order("name");if(s)throw s;q(a||[])}catch(e){console.error("Error loading insurance companies:",e)}},et=e=>{let{name:a,value:s,type:t}=e.target,i=e.target.checked;V(e=>({...e,[a]:"checkbox"===t?i:s}))},ei=()=>{let e=new Date().getFullYear(),a=String(new Date().getMonth()+1).padStart(2,"0"),s=Math.floor(1e3*Math.random()).toString().padStart(3,"0");return"JOB-".concat(e).concat(a,"-").concat(s)},el=async a=>{if(a.preventDefault(),e)try{let a=ei(),s={...J,client_id:J.client_id&&""!==J.client_id.trim()?J.client_id:null,technician_id:J.technician_id&&""!==J.technician_id.trim()?J.technician_id:null,insurance_company_id:J.insurance_company_id&&""!==J.insurance_company_id.trim()?J.insurance_company_id:null,estimated_hours:J.estimated_hours?parseFloat(J.estimated_hours.toString()):null};if(E){let{error:e}=await m.supabase.from("jobs").update(s).eq("id",E.id);if(e)throw e;x.ZP.success("Trabajo actualizado correctamente")}else{let{error:t}=await m.supabase.from("jobs").insert([{...s,job_number:a,company_id:e.id}]);if(t)throw t;x.ZP.success("Trabajo creado correctamente")}Z(!1),T(null),em(),K()}catch(e){console.error("Error saving job:",e),x.ZP.error("Error al guardar el trabajo")}},en=e=>{T(e);let a="";if(e.scheduled_date){let s=new Date(e.scheduled_date),t=s.getFullYear(),i=String(s.getMonth()+1).padStart(2,"0"),l=String(s.getDate()).padStart(2,"0"),n=String(s.getHours()).padStart(2,"0"),r=String(s.getMinutes()).padStart(2,"0");a="".concat(t,"-").concat(i,"-").concat(l,"T").concat(n,":").concat(r)}V({title:e.title,description:e.description,job_type:e.job_type,priority:e.priority,category:e.category,client_id:e.client_id||"",technician_id:e.technician_id||"",insurance_company_id:e.insurance_company_id||"",scheduled_date:a,estimated_hours:e.estimated_hours,notes:e.notes}),Z(!0)},er=e=>{O(e),H(!0)},ec=e=>{B(e),A(!0)},ed=async()=>{if(I)try{let{error:e}=await m.supabase.from("jobs").delete().eq("id",I.id);if(e)throw e;x.ZP.success("Trabajo eliminado correctamente"),H(!1),O(null),K()}catch(e){console.error("Error deleting job:",e),x.ZP.error("Error al eliminar el trabajo")}},eo=async(e,a)=>{try{let s={status:a};"in_progress"===a?s.start_date=new Date().toISOString():"completed"===a&&(s.completion_date=new Date().toISOString());let{error:t}=await m.supabase.from("jobs").update(s).eq("id",e);if(t)throw t;x.ZP.success("Estado actualizado correctamente"),K()}catch(e){console.error("Error updating status:",e),x.ZP.error("Error al actualizar el estado")}},em=()=>{V({title:"",description:"",job_type:"repair",priority:"normal",category:"",client_id:"",technician_id:"",insurance_company_id:"",scheduled_date:"",estimated_hours:0,notes:""})},ex=()=>{T(null),em(),Z(!0)},eh=e=>{let a={emergency:{variant:"danger",label:"Emergencia"},urgent:{variant:"warning",label:"Urgente"},normal:{variant:"info",label:"Normal"}}[e]||{variant:"gray",label:e};return(0,t.jsx)(o.C,{variant:a.variant,size:"sm",children:a.label})},eu=e=>{let a={repair:{variant:"info",label:"Reparaci\xf3n"},renovation:{variant:"success",label:"Reforma"},emergency:{variant:"danger",label:"Emergencia"}}[e]||{variant:"gray",label:e};return(0,t.jsx)(o.C,{variant:a.variant,size:"sm",children:a.label})};return w?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"spinner"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Trabajos"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Gestiona las \xf3rdenes de trabajo y reparaciones."})]}),(0,t.jsxs)(r.z,{onClick:ex,className:"flex items-center space-x-2 w-full sm:w-auto",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Nuevo Trabajo"})]})]}),(0,t.jsxs)(n.Zb,{className:"app-card",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Filtros"})}),(0,t.jsxs)(n.eW,{children:[(0,t.jsxs)("div",{className:"filter-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Buscar"}),(0,t.jsx)("input",{type:"text",placeholder:"T\xedtulo, n\xfamero, cliente...",value:U.search,onChange:e=>X("search",e.target.value),className:"form-input"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Estado"}),(0,t.jsxs)("select",{value:U.status,onChange:e=>X("status",e.target.value),className:"form-input",children:[(0,t.jsx)("option",{value:"",children:"Todos los estados"}),(0,t.jsx)("option",{value:"pending",children:"Pendiente"}),(0,t.jsx)("option",{value:"scheduled",children:"Programado"}),(0,t.jsx)("option",{value:"in_progress",children:"En Progreso"}),(0,t.jsx)("option",{value:"completed",children:"Completado"}),(0,t.jsx)("option",{value:"cancelled",children:"Cancelado"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Tipo"}),(0,t.jsxs)("select",{value:U.job_type,onChange:e=>X("job_type",e.target.value),className:"form-input",children:[(0,t.jsx)("option",{value:"",children:"Todos los tipos"}),(0,t.jsx)("option",{value:"repair",children:"Reparaci\xf3n"}),(0,t.jsx)("option",{value:"maintenance",children:"Mantenimiento"}),(0,t.jsx)("option",{value:"installation",children:"Instalaci\xf3n"}),(0,t.jsx)("option",{value:"inspection",children:"Inspecci\xf3n"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Prioridad"}),(0,t.jsxs)("select",{value:U.priority,onChange:e=>X("priority",e.target.value),className:"form-input",children:[(0,t.jsx)("option",{value:"",children:"Todas las prioridades"}),(0,t.jsx)("option",{value:"low",children:"Baja"}),(0,t.jsx)("option",{value:"normal",children:"Normal"}),(0,t.jsx)("option",{value:"high",children:"Alta"}),(0,t.jsx)("option",{value:"urgent",children:"Urgente"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Cliente"}),(0,t.jsxs)("select",{value:U.client_id,onChange:e=>X("client_id",e.target.value),className:"form-input",children:[(0,t.jsx)("option",{value:"",children:"Todos los clientes"}),z.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"T\xe9cnico"}),(0,t.jsxs)("select",{value:U.technician_id,onChange:e=>X("technician_id",e.target.value),className:"form-input",children:[(0,t.jsx)("option",{value:"",children:"Todos los t\xe9cnicos"}),P.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id))]})]})]}),(0,t.jsx)("div",{className:"flex justify-end mt-4",children:(0,t.jsx)(r.z,{variant:"outline",onClick:$,className:"text-sm",children:"Limpiar Filtros"})})]})]}),(0,t.jsxs)(n.Zb,{className:"app-card",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Lista de Trabajos (",G.length," de ",a.length,")"]})}),(0,t.jsx)(n.eW,{children:G.length>0?(0,t.jsx)("div",{className:"space-y-4",children:G.map(e=>{var a;return(0,t.jsx)("div",{className:"job-card bg-white border border-gray-200 rounded-xl p-4 hover:shadow-md transition-shadow",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4 min-w-0",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary-50 text-primary-700 flex items-center justify-center shadow-sm flex-shrink-0",children:(0,t.jsx)(u.Z,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-mono text-xs px-2 py-0.5 bg-gray-100 text-gray-700 rounded",children:e.job_number}),eu(e.job_type),eh(e.priority)]}),(0,t.jsx)("h4",{className:"mt-1 text-base font-semibold text-gray-900 truncate",children:e.title}),e.description&&(0,t.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2 max-w-prose",children:e.description}),(0,t.jsxs)("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,t.jsx)(j.Z,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{className:"truncate",children:e.technicians?"".concat(e.technicians.first_name," ").concat(e.technicians.last_name):"Sin asignar"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{className:"truncate",children:null===(a=e.clients)||void 0===a?void 0:a.address})]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-3 flex-shrink-0",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("select",{value:e.status,onChange:a=>eo(e.id,a.target.value),className:"text-xs px-3 py-1 rounded-full border-0 font-medium cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-1 min-w-[110px] ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800 focus:ring-yellow-500":"scheduled"===e.status?"bg-blue-100 text-blue-800 focus:ring-blue-500":"in_progress"===e.status?"bg-indigo-100 text-indigo-800 focus:ring-indigo-500":"completed"===e.status?"bg-green-100 text-green-800 focus:ring-green-500":"bg-red-100 text-red-800 focus:ring-red-500"),children:[(0,t.jsx)("option",{value:"pending",children:"Pendiente"}),(0,t.jsx)("option",{value:"scheduled",children:"Programado"}),(0,t.jsx)("option",{value:"in_progress",children:"En Progreso"}),(0,t.jsx)("option",{value:"completed",children:"Completado"}),(0,t.jsx)("option",{value:"cancelled",children:"Cancelado"})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsx)(g.Z,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{children:e.scheduled_date?(0,N.Z)(new Date(e.scheduled_date),"dd/MM/yyyy",{locale:_.Z}):"-"})]}),(0,t.jsxs)("div",{className:"action-buttons flex items-center gap-2",children:[(0,t.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>ec(e),title:"Ver trabajo",children:(0,t.jsx)(v.Z,{className:"h-4 w-4"})}),(0,t.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>en(e),title:"Editar trabajo",children:(0,t.jsx)(y.Z,{className:"h-4 w-4"})}),(0,t.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>er(e),title:"Eliminar trabajo",children:(0,t.jsx)(f.Z,{className:"h-4 w-4"})})]})]})]})},e.id)})}):0===a.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(u.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,t.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay trabajos"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Comienza creando tu primer trabajo."}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsxs)(r.z,{onClick:ex,children:[(0,t.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Nuevo Trabajo"]})})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(u.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,t.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron trabajos"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de b\xfasqueda."}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(r.z,{variant:"outline",onClick:$,children:"Limpiar Filtros"})})]})})]}),(0,t.jsx)(d.u,{isOpen:S,onClose:()=>Z(!1),title:E?"Editar Trabajo":"Nuevo Trabajo",size:"lg",children:(0,t.jsxs)("form",{onSubmit:el,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)(c.I,{label:"T\xedtulo del Trabajo *",name:"title",value:J.title,onChange:et,required:!0})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Tipo de Trabajo *"}),(0,t.jsxs)("select",{name:"job_type",value:J.job_type,onChange:et,required:!0,className:"form-input",children:[(0,t.jsx)("option",{value:"repair",children:"Reparaci\xf3n"}),(0,t.jsx)("option",{value:"renovation",children:"Reforma"}),(0,t.jsx)("option",{value:"emergency",children:"Emergencia"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Prioridad *"}),(0,t.jsxs)("select",{name:"priority",value:J.priority,onChange:et,required:!0,className:"form-input",children:[(0,t.jsx)("option",{value:"normal",children:"Normal"}),(0,t.jsx)("option",{value:"urgent",children:"Urgente"}),(0,t.jsx)("option",{value:"emergency",children:"Emergencia"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Categor\xeda"}),(0,t.jsxs)("select",{name:"category",value:J.category,onChange:et,className:"form-input",children:[(0,t.jsx)("option",{value:"",children:"Seleccionar categor\xeda"}),(0,t.jsx)("option",{value:"electricidad",children:"Electricidad"}),(0,t.jsx)("option",{value:"fontaneria",children:"Fontaner\xeda"}),(0,t.jsx)("option",{value:"carpinteria",children:"Carpinter\xeda"}),(0,t.jsx)("option",{value:"pintura",children:"Pintura"}),(0,t.jsx)("option",{value:"albanileria",children:"Alba\xf1iler\xeda"}),(0,t.jsx)("option",{value:"general",children:"General"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Cliente *"}),(0,t.jsxs)("select",{name:"client_id",value:J.client_id,onChange:et,required:!0,className:"form-input",children:[(0,t.jsx)("option",{value:"",children:"Seleccionar cliente"}),z.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"T\xe9cnico"}),(0,t.jsxs)("select",{name:"technician_id",value:J.technician_id,onChange:et,className:"form-input",children:[(0,t.jsx)("option",{value:"",children:"Sin asignar"}),P.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Aseguradora"}),(0,t.jsxs)("select",{name:"insurance_company_id",value:J.insurance_company_id,onChange:et,className:"form-input",children:[(0,t.jsx)("option",{value:"",children:"Sin aseguradora"}),D.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsx)("div",{children:(0,t.jsx)(c.I,{label:"Fecha Programada",name:"scheduled_date",type:"datetime-local",value:J.scheduled_date,onChange:et})}),(0,t.jsx)("div",{children:(0,t.jsx)(c.I,{label:"Horas Estimadas",name:"estimated_hours",type:"number",value:J.estimated_hours,onChange:et,min:"0",step:"0.5"})}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"form-label",children:"Descripci\xf3n"}),(0,t.jsx)("textarea",{name:"description",value:J.description,onChange:et,rows:3,className:"form-input"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"form-label",children:"Notas"}),(0,t.jsx)("textarea",{name:"notes",value:J.notes,onChange:et,rows:2,className:"form-input"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,t.jsx)(r.z,{type:"button",variant:"outline",onClick:()=>Z(!1),children:"Cancelar"}),(0,t.jsxs)(r.z,{type:"submit",children:[E?"Actualizar":"Crear"," Trabajo"]})]})]})}),(0,t.jsx)(d.u,{isOpen:L,onClose:()=>A(!1),title:"Detalles del Trabajo",size:"lg",children:R&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,t.jsx)(u.Z,{className:"h-8 w-8 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:R.job_number}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(e=>{let a={pending:{variant:"warning",label:"Pendiente"},scheduled:{variant:"info",label:"Programado"},in_progress:{variant:"info",label:"En Progreso"},completed:{variant:"success",label:"Completado"},cancelled:{variant:"danger",label:"Cancelado"}}[e]||{variant:"gray",label:e};return(0,t.jsx)(o.C,{variant:a.variant,children:a.label})})(R.status),eh(R.priority),eu(R.job_type)]})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Informaci\xf3n del Trabajo"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"T\xedtulo"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:R.title})]}),R.description&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Descripci\xf3n"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:R.description})]}),R.category&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Categor\xeda"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:R.category})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Cliente"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(j.Z,{className:"h-4 w-4 text-purple-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Cliente"}),(0,t.jsxs)("p",{className:"font-medium text-gray-900",children:[R.clients.first_name," ",R.clients.last_name]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(b.Z,{className:"h-4 w-4 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,t.jsx)("a",{href:"mailto:".concat(R.clients.email),className:"font-medium text-blue-600 hover:text-blue-700",children:R.clients.email})]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(p.Z,{className:"h-4 w-4 text-orange-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Direcci\xf3n"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:R.clients.address})]})]})]})]})]}),R.technicians&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"T\xe9cnico Asignado"}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(j.Z,{className:"h-4 w-4 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"T\xe9cnico"}),(0,t.jsxs)("p",{className:"font-medium text-gray-900",children:[R.technicians.first_name," ",R.technicians.last_name]}),R.technicians.phone&&(0,t.jsx)("a",{href:"tel:".concat(R.technicians.phone),className:"text-sm text-blue-600 hover:text-blue-700",children:R.technicians.phone})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Fechas y Horarios"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[R.scheduled_date&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Fecha Programada"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:(0,N.Z)(new Date(R.scheduled_date),"dd/MM/yyyy HH:mm",{locale:_.Z})})]}),R.start_date&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Fecha de Inicio"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:(0,N.Z)(new Date(R.start_date),"dd/MM/yyyy HH:mm",{locale:_.Z})})]}),R.completion_date&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Fecha de Finalizaci\xf3n"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:(0,N.Z)(new Date(R.completion_date),"dd/MM/yyyy HH:mm",{locale:_.Z})})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Costos y Horas"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[R.estimated_hours&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Horas Estimadas"}),(0,t.jsxs)("p",{className:"font-medium text-gray-900",children:[R.estimated_hours,"h"]})]}),R.actual_hours&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Horas Reales"}),(0,t.jsxs)("p",{className:"font-medium text-gray-900",children:[R.actual_hours,"h"]})]}),R.labor_cost&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Costo de Mano de Obra"}),(0,t.jsxs)("p",{className:"font-medium text-gray-900",children:["€",R.labor_cost.toFixed(2)]})]}),R.total_cost&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Costo Total"}),(0,t.jsxs)("p",{className:"font-semibold text-gray-900",children:["€",R.total_cost.toFixed(2)]})]})]})]}),R.notes&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Notas"}),(0,t.jsx)("p",{className:"text-gray-900",children:R.notes})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-500",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Creado:"})," ",(0,N.Z)(new Date(R.created_at),"dd/MM/yyyy HH:mm",{locale:_.Z})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Actualizado:"})," ",(0,N.Z)(new Date(R.updated_at),"dd/MM/yyyy HH:mm",{locale:_.Z})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,t.jsx)(r.z,{type:"button",variant:"outline",onClick:()=>A(!1),children:"Cerrar"}),(0,t.jsx)(r.z,{type:"button",onClick:()=>{A(!1),en(R)},children:"Editar Trabajo"})]})]})}),(0,t.jsx)(d.u,{isOpen:F,onClose:()=>H(!1),title:"Eliminar Trabajo",children:I&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("p",{className:"text-gray-600",children:["\xbfEst\xe1s seguro de que quieres eliminar el trabajo"," ",(0,t.jsxs)("strong",{children:[I.job_number," - ",I.title]}),"?"]}),(0,t.jsx)("p",{className:"text-sm text-red-600",children:"Esta acci\xf3n no se puede deshacer."}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)(r.z,{variant:"outline",onClick:()=>H(!1),children:"Cancelar"}),(0,t.jsx)(r.z,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:ed,children:"Eliminar"})]})]})})]})}},38068:function(e,a,s){"use strict";s.d(a,{I:function(){return l}});var t=s(57437);s(2265);var i=s(61994);function l(e){let{label:a,error:s,helperText:l,className:n,id:r,...c}=e,d=r||"input-".concat(Math.random().toString(36).substr(2,9));return(0,t.jsxs)("div",{className:"w-full",children:[a&&(0,t.jsx)("label",{htmlFor:d,className:"form-label",children:a}),(0,t.jsx)("input",{id:d,className:(0,i.W)("form-input",s&&"border-red-300 focus:ring-red-500 focus:border-red-500",n),...c}),s&&(0,t.jsx)("p",{className:"form-error",children:s}),l&&!s&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:l})]})}}},function(e){e.O(0,[8829,8931,5703,2971,2117,1744],function(){return e(e.s=8113)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6938],{13154:function(e,t,r){Promise.resolve().then(r.bind(r,51856))},51856:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var a=r(57437),n=r(27648),s=r(99178),i=r(46281),o=r(99376),u=r(69064),l=r(92369),c=r(98420),d=r(44794),f=r(88906),h=r(94766),p=r(98728);function m(){let{signOut:e}=(0,i.a)(),t=(0,o.useRouter)(),r=async()=>{try{await e(),u.ZP.success("Sesi\xf3n cerrada correctamente"),t.push("/auth/login")}catch(e){console.error("Error al cerrar sesi\xf3n:",e),u.ZP.error("Error al cerrar sesi\xf3n")}},m=[{title:"Perfil de Usuario",description:"Configura tu informaci\xf3n personal y preferencias",icon:l.Z,href:"/settings/profile",color:"bg-blue-100",iconColor:"text-blue-600"},{title:"Empresa",description:"Gestiona la informaci\xf3n de tu empresa y logo",icon:c.Z,href:"/settings/company",color:"bg-green-100",iconColor:"text-green-600"},{title:"M\xf3dulos",description:"Gestiona m\xf3dulos adicionales y expande las funcionalidades",icon:d.Z,href:"/settings/modules",color:"bg-purple-100",iconColor:"text-purple-600"},{title:"Seguridad",description:"Configura contrase\xf1as y opciones de seguridad",icon:f.Z,href:"/settings/security",color:"bg-red-100",iconColor:"text-red-600"},{title:"Notificaciones",description:"Configura c\xf3mo recibes las notificaciones",icon:h.Z,href:"/settings/notifications",color:"bg-yellow-100",iconColor:"text-yellow-600"}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center mb-8",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-8 w-8 text-gray-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuraci\xf3n"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Administra tu cuenta y configuraci\xf3n del sistema"})]})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(e=>(0,a.jsx)(n.default,{href:e.href,children:(0,a.jsx)(s.Zb,{className:"app-card hover:shadow-lg transition-shadow duration-200 cursor-pointer",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 ".concat(e.color," rounded-lg mb-4"),children:(0,a.jsx)(e.icon,{className:"h-6 w-6 ".concat(e.iconColor)})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:e.description})]})})},e.href))}),(0,a.jsx)(s.Zb,{className:"app-card",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Acceso R\xe1pido"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(n.default,{href:"/settings/profile",className:"text-primary-600 hover:text-primary-700 font-medium",children:"→ Editar Perfil"}),(0,a.jsx)(n.default,{href:"/settings/modules",className:"text-primary-600 hover:text-primary-700 font-medium",children:"→ Gestionar M\xf3dulos"}),(0,a.jsx)(n.default,{href:"/settings/company",className:"text-primary-600 hover:text-primary-700 font-medium",children:"→ Configurar Empresa"}),(0,a.jsx)("button",{onClick:r,className:"text-red-600 hover:text-red-700 font-medium text-left",children:"→ Cerrar Sesi\xf3n"})]})]})})]})}},99178:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},Zb:function(){return s},eW:function(){return o}});var a=r(57437);r(2265);var n=r(61994);function s(e){let{children:t,className:r}=e;return(0,a.jsx)("div",{className:(0,n.W)("card",r),children:t})}function i(e){let{children:t,className:r}=e;return(0,a.jsx)("div",{className:(0,n.W)("card-header",r),children:t})}function o(e){let{children:t,className:r}=e;return(0,a.jsx)("div",{className:(0,n.W)("card-body",r),children:t})}},46281:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return l},a:function(){return c}});var a=r(57437),n=r(2265),s=r(2141),i=r(69064),o=r(26098);let u=(0,n.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[f,h]=(0,n.useState)(null),[p,m]=(0,n.useState)(!0),y=async e=>{try{if(c&&c.id===e){(0,o.wH)("debug","\uD83D\uDD04 User profile already loaded, skipping...");return}(0,o.wH)("debug","\uD83D\uDD04 Loading user profile for:",e);let{data:a,error:n}=await (0,s.supabaseTable)("users").select("\n          *,\n          company:companies(*)\n        ").eq("id",e).single();if(n){console.warn("⚠️ Could not load user profile:",n.message);let e=(await s.supabase.auth.getUser()).data.user;if(e){var t,r;d({id:e.id,email:e.email,first_name:null===(t=e.user_metadata)||void 0===t?void 0:t.first_name,last_name:null===(r=e.user_metadata)||void 0===r?void 0:r.last_name})}return}(0,o.wH)("debug","✅ User profile loaded successfully"),d(a),h(a.company||null)}catch(e){console.warn("⚠️ Error loading user profile:",e)}};(0,n.useEffect)(()=>{let e=!0;(async()=>{try{let{data:{session:t}}=await s.supabase.auth.getSession();(null==t?void 0:t.user)&&e&&(l(t.user),await y(t.user.id))}catch(e){console.error("Error initializing auth:",e)}finally{e&&m(!1)}})();let{data:{subscription:t}}=s.supabase.auth.onAuthStateChange(async(e,t)=>{var r;(0,o.wH)("debug","\uD83D\uDD04 Auth state change:",e,null==t?void 0:null===(r=t.user)||void 0===r?void 0:r.id),"SIGNED_OUT"===e?(l(null),d(null),h(null),i.ZP.success("Sesi\xf3n cerrada")):"SIGNED_IN"===e&&(null==t?void 0:t.user)?(l(t.user),c&&c.id===t.user.id||await y(t.user.id)):"TOKEN_REFRESHED"===e&&(0,o.wH)("debug","\uD83D\uDD04 Token refreshed successfully")});return()=>{e=!1,t.unsubscribe()}},[]);let g=async(e,t)=>{let{data:r,error:a}=await s.supabase.auth.signInWithPassword({email:e,password:t});if(a)throw a;return r},N=async(e,t,r)=>{let{data:a,error:n}=await s.supabase.auth.signUp({email:e,password:t,options:{data:r}});if(n)throw n;return a},b=async()=>{await s.supabase.auth.signOut()},v=async e=>{if(!r)throw Error("Usuario no autenticado");let{error:t}=await (0,s.supabaseTable)("users").update(e).eq("id",r.id);if(t)throw t;await y(r.id)};return(0,a.jsx)(u.Provider,{value:{user:r,profile:c,company:f,loading:p,signIn:g,signUp:N,signOut:b,updateProfile:v},children:t})}function c(){let e=(0,n.useContext)(u);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},26098:function(e,t,r){"use strict";r.d(t,{ob:function(){return a},wH:function(){return n}});let a={CACHE:{STALE_TIME:3e4,REFETCH_INTERVAL:3e5,REQUEST_TIMEOUT:1e4},SESSION:{CHECK_INTERVAL:6e4,WARNING_TIME:3e5},LOGGING:{ENABLED:!1,MIN_LEVEL:"error"},SUPABASE:{CONNECTION_POOL_SIZE:10,CONNECTION_TIMEOUT:5e3,AUTO_RETRY:!0,MAX_RETRIES:3,SINGLETON_MODE:!0,CHECK_INITIALIZATION:!0}},n=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!a.LOGGING.ENABLED)return;let s=["debug","info","warn","error"];s.indexOf(e)>=s.indexOf(a.LOGGING.MIN_LEVEL)&&console[e](...r)}},2141:function(e,t,r){"use strict";r.r(t),r.d(t,{supabase:function(){return f},supabaseAdmin:function(){return h},supabaseAdminTable:function(){return m},supabaseTable:function(){return p}});var a,n,s,i,o=r(63887),u=r(40257);let l=u.env.NEXT_PUBLIC_SUPABASE_URL||"https://pbdsuhmwxqiwbpgyrhqt.supabase.co",c=u.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBiZHN1aG13eHFpd2JwZ3lyaHF0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkwODYyMzMsImV4cCI6MjA3NDY2MjIzM30.u5TqGGpULVAD062GT3zbfdC5RwOrj-jacJhWNSbfqus",d=u.env.NEXT_PUBLIC_SUPABASE_SERVICE_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBiZHN1aG13eHFpd2JwZ3lyaHF0Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1OTA4NjIzMywiZXhwIjoyMDc0NjYyMjMzfQ.vZDNEvaGYn4-FAvyym69OQxFZkpc4m1ufcCn45Jn3jE",f=null!==(s=(a=globalThis).__supabaseClient)&&void 0!==s?s:a.__supabaseClient=(0,o.eI)(l,c,{auth:{flowType:"pkce",persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"supabase.auth.token"}}),h=null!==(i=(n=globalThis).__supabaseAdminClient)&&void 0!==i?i:n.__supabaseAdminClient=(0,o.eI)(l,d,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1,storageKey:"supabase.admin.token"}}),p=e=>f.from(e),m=e=>h.from(e)},39763:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var a=r(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{color:o="currentColor",size:u=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:d="",children:f,...h}=r;return(0,a.createElement)("svg",{ref:i,...n,width:u,height:u,stroke:o,strokeWidth:c?24*Number(l)/Number(u):l,className:["lucide","lucide-".concat(s(e)),d].join(" "),...h},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(f)?f:[f]])});return r.displayName="".concat(e),r}},94766:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},98420:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},44794:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},98728:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},88906:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},92369:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},99376:function(e,t,r){"use strict";var a=r(35475);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},61994:function(e,t,r){"use strict";function a(){for(var e,t,r=0,a="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,a,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(a=e(t[r]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a)}return n}(e))&&(a&&(a+=" "),a+=t);return a}r.d(t,{W:function(){return a}})}},function(e){e.O(0,[8829,7648,2971,2117,1744],function(){return e(e.s=13154)}),_N_E=e.O()}]);
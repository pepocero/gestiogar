(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9671],{50619:function(e,r,s){Promise.resolve().then(s.bind(s,27352))},27352:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return b}});var t=s(57437),a=s(2265),l=s(99178),n=s(62953),i=s(32660),c=s(92369),o=s(89345),d=s(13041),m=s(83774),u=s(83229),h=s(27648),x=s(46281),f=s(69064);function b(){let{user:e,company:r}=(0,x.a)(),[s,b]=(0,a.useState)(!0),[p,g]=(0,a.useState)(!1),[j,y]=(0,a.useState)({firstName:"",lastName:"",email:"",phone:"",jobTitle:""});(0,a.useEffect)(()=>{if(e){var r,s,t,a;y({firstName:(null===(r=e.user_metadata)||void 0===r?void 0:r.first_name)||"",lastName:(null===(s=e.user_metadata)||void 0===s?void 0:s.last_name)||"",email:e.email||"",phone:(null===(t=e.user_metadata)||void 0===t?void 0:t.phone)||"",jobTitle:(null===(a=e.user_metadata)||void 0===a?void 0:a.job_title)||""}),b(!1)}},[e]);let N=async e=>{e.preventDefault(),g(!0);try{await new Promise(e=>setTimeout(e,1e3)),f.ZP.success("Perfil actualizado correctamente")}catch(e){f.ZP.error("Error al actualizar el perfil")}finally{g(!1)}},v=e=>{let{name:r,value:s}=e.target;y(e=>({...e,[r]:s}))};return s?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)(h.default,{href:"/settings",className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[(0,t.jsx)(i.Z,{className:"h-5 w-5 mr-2"}),"Volver a Configuraci\xf3n"]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Perfil de Usuario"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Administra tu informaci\xf3n personal y preferencias"})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)("h2",{className:"text-xl font-semibold flex items-center",children:[(0,t.jsx)(c.Z,{className:"h-5 w-5 mr-2"}),"Informaci\xf3n Personal"]})}),(0,t.jsx)(l.eW,{children:(0,t.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre"}),(0,t.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:j.firstName,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tu nombre"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Apellidos"}),(0,t.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:j.lastName,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tus apellidos"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 inline mr-1"}),"Email"]}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",value:j.email,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"tu@empresa.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(d.Z,{className:"h-4 w-4 inline mr-1"}),"Tel\xe9fono"]}),(0,t.jsx)("input",{type:"tel",id:"phone",name:"phone",value:j.phone,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+34 123 456 789"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"jobTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cargo en la empresa"}),(0,t.jsx)("input",{type:"text",id:"jobTitle",name:"jobTitle",value:j.jobTitle,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Administrador, T\xe9cnico, etc."})]})]}),r&&(0,t.jsxs)("div",{className:"border-t pt-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Empresa"}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center mb-2",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 mr-2 text-gray-500"}),(0,t.jsx)("span",{className:"font-medium",children:r.name})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Est\xe1s registrado como usuario de esta empresa."})]})]}),(0,t.jsx)("div",{className:"flex justify-end pt-6 border-t",children:(0,t.jsxs)(n.zx,{type:"submit",disabled:p,className:"flex items-center",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),p?"Guardando...":"Guardar Cambios"]})})]})})]})]})}},96372:function(e,r,s){"use strict";s.d(r,{v:function(){return u}});var t=s(57437),a=s(2265),l=s(22574),n=s(84226),i=s(32489),c=s(41414),o=s(45802),d=s(43391),m=s(30401);function u(e){let{isOpen:r,onClose:s,onSave:u,imageFile:h,aspectRatio:x=1,title:f="Editar Imagen",circular:b=!1}=e,[p,g]=(0,a.useState)(),[j,y]=(0,a.useState)(),[N,v]=(0,a.useState)(1),[w,k]=(0,a.useState)(0),[C,Z]=(0,a.useState)(""),z=(0,a.useRef)(null),_=(0,a.useRef)(null);a.useEffect(()=>{if(r&&h){let e=new FileReader;e.onload=e=>{var r;Z(null===(r=e.target)||void 0===r?void 0:r.result)},e.readAsDataURL(h)}},[r,h]);let E=(0,a.useCallback)(e=>{let{width:r,height:s}=e.currentTarget;g((0,l._H)((0,l.YG)({unit:"%",width:90},x,r,s),r,s))},[x]),T=(e,r)=>{let s=_.current;if(!s)throw Error("Canvas no disponible");let t=s.getContext("2d");if(!t)throw Error("Contexto 2D no disponible");let a=e.naturalWidth/e.width,l=e.naturalHeight/e.height,n=window.devicePixelRatio;return s.width=r.width*n*a,s.height=r.height*n*l,t.setTransform(n,0,0,n,0,0),t.imageSmoothingQuality="high",0!==w&&(t.translate(s.width/2,s.height/2),t.rotate(w*Math.PI/180),t.translate(-s.width/2,-s.height/2)),t.drawImage(e,r.x*a,r.y*l,r.width*a,r.height*l,0,0,s.width/n,s.height/n),new Promise(e=>{s.toBlob(r=>{r&&e(r)},"image/jpeg",.95)})},P=async()=>{if(z.current&&j)try{let e=await T(z.current,j);u(e),s()}catch(e){console.error("Error al procesar la imagen:",e)}};return r&&C?(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:f}),(0,t.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,t.jsx)(i.Z,{className:"h-5 w-5 text-gray-500"})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-4 p-4 border-b border-gray-200 bg-gray-50",children:[(0,t.jsxs)(n.z,{variant:"secondary",size:"sm",onClick:()=>{k(e=>(e+90)%360)},className:"flex items-center",children:[(0,t.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Rotar"]}),(0,t.jsxs)(n.z,{variant:"secondary",size:"sm",onClick:()=>{v(e=>Math.max(e-.1,.5))},className:"flex items-center",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Alejar"]}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:[Math.round(100*N),"%"]}),(0,t.jsxs)(n.z,{variant:"secondary",size:"sm",onClick:()=>{v(e=>Math.min(e+.1,3))},className:"flex items-center",children:[(0,t.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Acercar"]})]}),(0,t.jsx)("div",{className:"p-4 overflow-auto max-h-[60vh]",children:(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(l.ZP,{crop:p,onChange:(e,r)=>g(r),onComplete:e=>y(e),aspect:x,circularCrop:b,children:(0,t.jsx)("img",{ref:z,alt:"Crop me",src:C,style:{transform:"scale(".concat(N,") rotate(").concat(w,"deg)"),maxWidth:"100%",maxHeight:"400px"},onLoad:E})})})}),(0,t.jsx)("canvas",{ref:_,style:{display:"none"}}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 p-4 border-t border-gray-200",children:[(0,t.jsx)(n.z,{variant:"secondary",onClick:s,children:"Cancelar"}),(0,t.jsxs)(n.z,{onClick:P,disabled:!j,className:"btn-primary flex items-center",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Guardar"]})]})]})}):null}s(83814)},38068:function(e,r,s){"use strict";s.d(r,{I:function(){return l}});var t=s(57437);s(2265);var a=s(61994);function l(e){let{label:r,error:s,helperText:l,className:n,id:i,...c}=e,o=i||"input-".concat(Math.random().toString(36).substr(2,9));return(0,t.jsxs)("div",{className:"w-full",children:[r&&(0,t.jsx)("label",{htmlFor:o,className:"form-label",children:r}),(0,t.jsx)("input",{id:o,className:(0,a.W)("form-input",s&&"border-red-300 focus:ring-red-500 focus:border-red-500",n),...c}),s&&(0,t.jsx)("p",{className:"form-error",children:s}),l&&!s&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:l})]})}},95930:function(e,r,s){"use strict";s.d(r,{iA:function(){return l}});var t=s(57437);s(2265);var a=s(61994);function l(e){let{children:r,className:s}=e;return(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsx)("table",{className:(0,a.W)("table",s),children:r})})}},62953:function(e,r,s){"use strict";s.d(r,{Ct:function(){return l.C},II:function(){return n.I},Zb:function(){return t.Zb},u_:function(){return i.u},zx:function(){return a.z}});var t=s(99178),a=s(84226),l=s(69379),n=s(38068),i=s(95998);s(95930),s(96372)},32660:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(39763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},89345:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(39763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},13041:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(39763).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},83229:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(39763).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},92369:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(39763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[5558,8829,3926,7648,5703,2971,2117,1744],function(){return e(e.s=50619)}),_N_E=e.O()}]);